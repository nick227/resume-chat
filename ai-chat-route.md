## AI Chat Route

### Endpoint
`POST /api/chat`

### Purpose
Generate an AI response to a user message and persist the conversation.

### Request
**Headers**
- `Content-Type: application/json`

**Body (JSON)**
- `message` (string, required) - User message to send to the AI.
- `userId` (string, required) - Client-generated user identifier.
- `sessionId` (string, optional) - WebSocket session identifier. When omitted, the server uses `default-session`.

**Shape**
```json
{
  "message": "string",
  "userId": "string",
  "sessionId": "string"
}
```

### Response
**Success (200)**
- `success` (boolean) - Always `true`.
- `message` (string) - AI response message.
- `options` (string[]) - Suggested follow-up options.
- `sessionId` (string) - Session identifier used for the request.

**Shape**
```json
{
  "success": true,
  "message": "string",
  "options": ["string"],
  "sessionId": "string"
}
```

**Validation Error (400)**
- `success` (boolean) - Always `false`.
- `error` (string) - Validation error message.

**Shape**
```json
{
  "success": false,
  "error": "string"
}
```

**Runtime Error (200)**
- `success` (boolean) - Always `false`.
- `error` (string) - Error message from AI or server.
- `options` (string[]) - Suggested fallback options.

**Shape**
```json
{
  "success": false,
  "error": "string",
  "options": ["string"]
}
```

### Notes
- The API persists both the user and assistant messages to the database.
- The AI response is generated by the OpenAI chat completions flow.
